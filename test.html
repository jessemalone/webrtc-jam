<html>

    <body>
        <audio controls id="player">
        <script>
            
const mediaStreamConstraints = {
    audio: {
        autoGainContol: false,
        echoCancellation: false,
        latency: 0.001, // This is only supported by chrome
        noiseSuppression: false,
        channelCount: 1
    },
    video: false
}

function gotLocalMediaStream(stream) {
    ctx = new AudioContext({"latencyHint": 0.001});
    player = document.getElementById('player');
    player.srcObject = stream;

    source = ctx.createMediaStreamSource(stream);
        new Audio().srcObject = stream;
    //dest = ctx.createMediaStreamDestination();
    source.connect(ctx.destination);
    //source.connect(dest);

}

    navigator.mediaDevices.getUserMedia(mediaStreamConstraints)
        .then(gotLocalMediaStream);

        </script>
    </body>
</html>

